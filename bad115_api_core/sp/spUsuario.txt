CREATE PROCEDURE spUsuario_ver
@p_id AS BIGINT=NULL
AS
BEGIN
	IF EXISTS(SELECT * FROM USUARIO WHERE ID_USUARIO=@p_id)
		SELECT * FROM USUARIO WHERE ID_USUARIO=@p_id
	ELSE
		SELECT * FROM USUARIO
END

CREATE PROCEDURE spUsuario_guardar
	@p_ACTIVO AS BIT      ,
	@p_EMAIL AS VARCHAR  ( 250 ) = NULL ,
	@p_ID_USUARIO AS INT      ,
	@p_MODIFICADO_EN AS DATETIME      ,
	@p_MODIFICADO_POR AS INT      ,
	@p_NOMBRE AS VARCHAR  ( 250 ) = NULL ,
	@p_PASSWORD AS VARCHAR  ( 250 ) = NULL ,
	@p_USUARIO AS VARCHAR  ( 250 ) = NULL 
AS
BEGIN

	 IF (@p_ID_USUARIO=-1)
	BEGIN
		INSERT INTO USUARIO (
		 ACTIVO ,
		 EMAIL ,
		 MODIFICADO_EN ,
		 MODIFICADO_POR ,
		 NOMBRE ,
		 PASSWORD ,
		 USUARIO 
		) VALUES (
		 @p_ACTIVO, 
		 @p_EMAIL, 
		 @p_MODIFICADO_EN, 
		 @p_MODIFICADO_POR, 
		 @p_NOMBRE, 
		 @p_PASSWORD, 
		 @p_USUARIO 
		)
	END

	ELSE
	BEGIN
		UPDATE USUARIO 
		SET 
		ACTIVO=@p_ACTIVO,
		EMAIL=@p_EMAIL,
		MODIFICADO_EN=@p_MODIFICADO_EN,
		MODIFICADO_POR=@p_MODIFICADO_POR,
		NOMBRE=@p_NOMBRE,
		PASSWORD=@p_PASSWORD,
		USUARIO=@p_USUARIO
		WHERE ID_USUARIO=@p_ID_USUARIO
	END
END
