CREATE or replace PROCEDURE spDetalle_orden_compra_ver
@p_id AS BIGINT=NULL
AS
BEGIN
	IF EXISTS(SELECT * FROM DETALLE_ORDEN_COMPRA WHERE ID_DETALLE_COMPRA=@p_id)
		SELECT * FROM DETALLE_ORDEN_COMPRA WHERE ID_DETALLE_COMPRA=@p_id
	ELSE
		SELECT * FROM DETALLE_ORDEN_COMPRA
END

CREATE or replace PROCEDURE spDetalle_orden_compra_guardar
	@p_ACTIVO AS BIT      ,
	@p_CANTIDAD AS DECIMAL      ,
	@p_FECHA_CREACION AS DATETIME      ,
	@p_ID_DETALLE_COMPRA AS INT      ,
	@p_ID_DIVISAS AS INT      ,
	@p_ID_ORDEN_COMPRA AS INT      ,
	@p_MODIFICADO_EN AS DATETIME      ,
	@p_MODIFICADO_POR AS INT      ,
	@p_NUMERO_DETALLE AS VARCHAR  ( 25 ) = NULL ,
	@p_PRECIO_UNITARIO AS DECIMAL      ,
	@p_VALOR_TOTAL AS DECIMAL      
AS
BEGIN

	 IF (@p_ID_DETALLE_COMPRA=-1)
	BEGIN
		INSERT INTO DETALLE_ORDEN_COMPRA (
		 ACTIVO ,
		 CANTIDAD ,
		 FECHA_CREACION ,
		 ID_DIVISAS ,
		 ID_ORDEN_COMPRA ,
		 MODIFICADO_EN ,
		 MODIFICADO_POR ,
		 NUMERO_DETALLE ,
		 PRECIO_UNITARIO ,
		 VALOR_TOTAL 
		) VALUES (
		 @p_ACTIVO, 
		 @p_CANTIDAD, 
		 @p_FECHA_CREACION, 
		 @p_ID_DIVISAS, 
		 @p_ID_ORDEN_COMPRA, 
		 @p_MODIFICADO_EN, 
		 @p_MODIFICADO_POR, 
		 @p_NUMERO_DETALLE, 
		 @p_PRECIO_UNITARIO, 
		 @p_VALOR_TOTAL 
		)
	END

	ELSE
	BEGIN
		UPDATE DETALLE_ORDEN_COMPRA 
		SET 
		ACTIVO=@p_ACTIVO,
		CANTIDAD=@p_CANTIDAD,
		FECHA_CREACION=@p_FECHA_CREACION,
		ID_DIVISAS=@p_ID_DIVISAS,
		ID_ORDEN_COMPRA=@p_ID_ORDEN_COMPRA,
		MODIFICADO_EN=@p_MODIFICADO_EN,
		MODIFICADO_POR=@p_MODIFICADO_POR,
		NUMERO_DETALLE=@p_NUMERO_DETALLE,
		PRECIO_UNITARIO=@p_PRECIO_UNITARIO,
		VALOR_TOTAL=@p_VALOR_TOTAL
		WHERE ID_DETALLE_COMPRA=@p_ID_DETALLE_COMPRA
	END
END
