CREATE PROCEDURE spEmpresa_ver
@p_id AS BIGINT=NULL
AS
BEGIN
	IF EXISTS(SELECT * FROM EMPRESA WHERE ID_EMPRESA=@p_id)
		SELECT * FROM EMPRESA WHERE ID_EMPRESA=@p_id
	ELSE
		SELECT * FROM EMPRESA
END

CREATE PROCEDURE spEmpresa_guardar
	@p_ACTIVO AS BIT      ,
	@p_DIRECCION_FISCAL AS VARCHAR  ( 500 ) = NULL ,
	@p_EMAIL AS VARCHAR  ( 250 ) = NULL ,
	@p_ID_EMPRESA AS INT      ,
	@p_MODIFICADO_EN AS DATETIME      ,
	@p_MODIFICADO_POR AS INT      ,
	@p_NIT AS VARCHAR  ( 100 ) = NULL ,
	@p_NOMBRE AS VARCHAR  ( 250 ) = NULL ,
	@p_TELEFONO AS VARCHAR  ( 15 ) = NULL 
AS
BEGIN

	 IF (@p_ID_EMPRESA=-1)
	BEGIN
		INSERT INTO EMPRESA (
		 ACTIVO ,
		 DIRECCION_FISCAL ,
		 EMAIL ,
		 MODIFICADO_EN ,
		 MODIFICADO_POR ,
		 NIT ,
		 NOMBRE ,
		 TELEFONO 
		) VALUES (
		 @p_ACTIVO, 
		 @p_DIRECCION_FISCAL, 
		 @p_EMAIL, 
		 @p_MODIFICADO_EN, 
		 @p_MODIFICADO_POR, 
		 @p_NIT, 
		 @p_NOMBRE, 
		 @p_TELEFONO 
		)
	END

	ELSE
	BEGIN
		UPDATE EMPRESA 
		SET 
		ACTIVO=@p_ACTIVO,
		DIRECCION_FISCAL=@p_DIRECCION_FISCAL,
		EMAIL=@p_EMAIL,
		MODIFICADO_EN=@p_MODIFICADO_EN,
		MODIFICADO_POR=@p_MODIFICADO_POR,
		NIT=@p_NIT,
		NOMBRE=@p_NOMBRE,
		TELEFONO=@p_TELEFONO
		WHERE ID_EMPRESA=@p_ID_EMPRESA
	END
END
