CREATE PROCEDURE spSucursal_ver
@p_id AS BIGINT=NULL
AS
BEGIN
	IF EXISTS(SELECT * FROM SUCURSAL WHERE ID_SUCURSAL=@p_id)
		SELECT * FROM SUCURSAL WHERE ID_SUCURSAL=@p_id
	ELSE
		SELECT * FROM SUCURSAL
END

CREATE PROCEDURE spSucursal_guardar
	@p_ACTIVO AS BIT      ,
	@p_DIRECCION AS VARCHAR  ( 500 ) = NULL ,
	@p_ID_PAIS AS INT      ,
	@p_ID_SUCURSAL AS INT      ,
	@p_LATITUD AS VARCHAR  ( 500 ) = NULL ,
	@p_LONGITUD AS VARCHAR  ( 500 ) = NULL ,
	@p_MODIFICADO_EN AS DATETIME      ,
	@p_MODIFICADO_POR AS INT      ,
	@p_NOMBRE AS VARCHAR  ( 250 ) = NULL 
AS
BEGIN

	 IF (@p_ID_SUCURSAL=-1)
	BEGIN
		INSERT INTO SUCURSAL (
		 ACTIVO ,
		 DIRECCION ,
		 ID_PAIS ,
		 LATITUD ,
		 LONGITUD ,
		 MODIFICADO_EN ,
		 MODIFICADO_POR ,
		 NOMBRE 
		) VALUES (
		 @p_ACTIVO, 
		 @p_DIRECCION, 
		 @p_ID_PAIS, 
		 @p_LATITUD, 
		 @p_LONGITUD, 
		 @p_MODIFICADO_EN, 
		 @p_MODIFICADO_POR, 
		 @p_NOMBRE 
		)
	END

	ELSE
	BEGIN
		UPDATE SUCURSAL 
		SET 
		ACTIVO=@p_ACTIVO,
		DIRECCION=@p_DIRECCION,
		ID_PAIS=@p_ID_PAIS,
		LATITUD=@p_LATITUD,
		LONGITUD=@p_LONGITUD,
		MODIFICADO_EN=@p_MODIFICADO_EN,
		MODIFICADO_POR=@p_MODIFICADO_POR,
		NOMBRE=@p_NOMBRE
		WHERE ID_SUCURSAL=@p_ID_SUCURSAL
	END
END
