CREATE PROCEDURE spDetallerequisicion_guardar
	@p_IDDETALLEREQUISICION as bigint,
	@p_CANTIDAD AS NUMERIC      ,
	@p_ESTADO AS BIT      ,
	@p_ID_PRODUCTO AS INT      ,
	@p_IDREQUISICION AS INT      
AS
BEGIN

	 IF (@p_IDDETALLEREQUISICION=-1)
	BEGIN
		INSERT INTO DETALLEREQUISICION (
		IDREQUISICION,
		 CANTIDAD ,
		 ESTADO ,
		 ID_PRODUCTO 
		) VALUES (
		@p_IDREQUISICION,
		 @p_CANTIDAD, 
		 @p_ESTADO, 
		 @p_ID_PRODUCTO
		)
	END

	ELSE
	BEGIN
		UPDATE DETALLEREQUISICION 
		SET 
		CANTIDAD=@p_CANTIDAD,
		ESTADO=@p_ESTADO,
		ID_PRODUCTO=@p_ID_PRODUCTO,
		IDREQUISICION=@p_IDREQUISICION
		WHERE IDDETALLEREQUISICION=@p_IDDETALLEREQUISICION
	END
END

CREATE PROCEDURE spDetallerequisicion_ver
@p_id AS BIGINT=NULL
AS
BEGIN
	IF EXISTS(SELECT * FROM DETALLEREQUISICION WHERE IDREQUISICION=@p_id)
		SELECT * FROM DETALLEREQUISICION WHERE IDREQUISICION=@p_id
	ELSE
		SELECT * FROM DETALLEREQUISICION
END